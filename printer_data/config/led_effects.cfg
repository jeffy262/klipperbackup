# -------------------- LED Effects --------------------
[led_effect bed_leds]
autostart: False
frame_rate: 24
heater: heater_bed
leds: neopixel:under_lights (54-125)
layers:
    # 50% of your original colors
    temperaturegauge 20 70 top \
      (0.125, 0.0,   0.0), \
      (0.095, 0.0,   0.0), \
      (0.070, 0.0,   0.0), \
      (0.10,  0.075, 0.0), \
      (0.10,  0.1075,0.0), \
      (0.0,   0.0,   0.05), \
      (0.0,   0.0,   0.05), \
      (0.0,   0.0,   0.05)

[led_effect hotend_leds]
autostart: False
frame_rate: 24
heater: extruder
leds: neopixel:my_neopixel (59-131)
layers:
    # 50% of your original colors
    temperaturegauge 22 235 top \
      (0.125, 0.0,   0.0), \
      (0.095, 0.0,   0.0), \
      (0.070, 0.0,   0.0), \
      (0.10,  0.075, 0.0), \
      (0.10,  0.1075,0.0), \
      (0.0,   0.0,   0.05), \
      (0.0,   0.0,   0.05), \
      (0.0,   0.0,   0.05)



[led_effect rainbow_leds]
autostart: False
frame_rate: 24
leds: neopixel:under_lights (1-53)
layers:
    # Original: (0.3,0.0,0.0),(0.0,0.3,0.0),(0.0,0.0,0.3)
    # 65%:      (0.195,0.0,0.0),(0.0,0.195,0.0),(0.0,0.0,0.195)
    gradient 0.3 1 add (0.195,0.0,0.0),(0.0,0.195,0.0),(0.0,0.0,0.195)

[led_effect under_standby_leds]
autostart: False
frame_rate: 24
leds: neopixel:under_lights (1-53)
layers:
    # Original: (0,0,1),(1,0,0)
    # 65%:      (0,0,0.65),(0.65,0,0)
    linearfade 20 0 top (0,0,0.65),(0.65,0,0)

[led_effect set_nozzle_leds]
autostart: False
frame_rate: 24
leds:
    neopixel:sb_leds (2,3)
layers:
    static 0 0 top (0.0,0.0,0.0,0.6)

# -------------------- Neopixel buses --------------------

[neopixel my_neopixel]
pin: PE6
chain_count: 132
color_order: GRB
initial_RED: 0.7
initial_GREEN: 0.7
initial_BLUE: 0.7
initial_WHITE: 0.0

[neopixel under_lights]
pin: PE5
chain_count: 125
color_order: GRB
initial_RED: 0.0
initial_GREEN: 0.0
initial_BLUE: 1.0
initial_WHITE: 0.0

[neopixel sb_leds]
pin: EBB:gpio15
chain_count: 3
color_order: GRBW
initial_RED: 1.0
initial_GREEN: 0.0
initial_BLUE: 0.0
initial_WHITE: 0.0

# -------------------- Safe startup of effects --------------------

[delayed_gcode _START_LED_EFFECTS]
initial_duration: 2.5
gcode:
    # Start only after all MCUs (including EBB) are connected.
    SET_LED_EFFECT EFFECT=under_standby_leds REPLACE=1
    SET_LED_EFFECT EFFECT=bed_leds
    SET_LED_EFFECT EFFECT=hotend_leds
    SET_LED_EFFECT EFFECT=set_nozzle_leds

# -------------------- Convenience macros (optional) --------------------

[gcode_macro HOTEND_LEDS]
gcode:
    SET_LED_EFFECT EFFECT=hotend_leds

[gcode_macro RAINBOW_LEDS]
gcode:
    SET_LED_EFFECT EFFECT=rainbow_leds REPLACE=1

[gcode_macro RAINBOW_LEDS_OFF]
gcode:
    SET_LED_EFFECT EFFECT=under_standby_leds REPLACE=1
